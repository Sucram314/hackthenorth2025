<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Lane Control — MediaPipe Hand Posture</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="card">
    <h1>✋ Lane Control <span class="badge">— MediaPipe Hand Posture</span></h1>
    <div class="toolbar">
      <button id="startBtn" class="primary">Start camera</button>
      <button id="stopBtn" disabled>Stop camera</button>
      <span class="pill"><span class="dot" id="dot"></span><span id="status">idle</span></span>
      <span class="pill" title="frames per second">FPS: <strong id="fps">0</strong></span>
      <span class="pill">Hands: <strong id="handsCount">0</strong></span>
      <span class="pill">Brushing: <strong id="brushingValue">0.00</strong></span>
      <span class="pill">Score: <strong id="score">0</strong>/<strong id="totalObstacles">0</strong></span>
      <span class="pill">Time: <strong id="timer">02:00</strong></span>
    </div>

    <div class="row" style="margin-top:10px;">
      <div class="stage">
        <!-- The video element will now be the background source for the canvas -->
        <video id="video" playsinline muted></video>
        <!-- The overlay canvas will now draw everything: video, landmarks, and game -->
        <canvas id="overlay"></canvas>
        <!-- The dedicated gameCanvas is no longer needed -->
        <canvas id="gameCanvas" width="640" height="360" style="display:none;"></canvas>
        <div class="watermark">Hand landmarks + game overlay</div>
      </div>
      <div class="log" id="log">Click “Start camera”, allow permission, then hold your hand up 🖐️.
        Tilt your hand up for the top lane.
        Tilt your hand down for the bottom lane.
        Hold it flat for the middle lane.
        Brush your hand back and forth horizontally to make obstacles move faster!
      </div>
    </div>

    <footer>
      Tip: This runs fully in your browser. Use HTTPS or localhost for camera access. Model provided by Google’s MediaPipe Hand Landmarker.
    </footer>
  </div>


  <script src="script.js" type="module"></script>
</body>
</html>